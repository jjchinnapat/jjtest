name: Go

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:

  push_core_image:
    runs-on: self-hosted
    steps:
    - uses: actions/checkout@v2
      # working-directory : ..
      # run: cd..
    - run: |
      cd /home/jjchin
      docker build -f /home/jjchin/actions-runner/test/jjtest/jjtest/Dockerfile \
      -t ghcr.io/jjchinnapat/imageflutterweb:latest --build-arg GIT_PAT=${{ secrets.GIT_PAT }} .
      echo ${{ secrets.GIT_PAT }} | docker login ghcr.io -u jjchinnapat --password-stdin
      docker push ghcr.io/jjchinnapat/imageflutterweb:latest
